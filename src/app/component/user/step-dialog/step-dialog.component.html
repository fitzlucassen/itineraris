<div class="md-padding" style="overflow: auto;" [style.max-height]="screenHeight + 'px'">
	<form name="userForm" [formGroup]="form" (ngSubmit)="registerStep()">
		<div layout layout-sm="column">
			<md-input-container>
				<input mdInput class="big-form" placeholder="Ville de l'étape" focus="window.scrollTo(0, 0);document.body.scrollTop = 0;" formControlName="city" [(ngModel)]="newStep.city" required flex autocorrect="off" autocapitalize="off" spellcheck="off" class="form-control" #search />
				<md-hint *ngIf="!city.untouched && !city.valid && city.errors.required" [ngStyle]="{'color': 'red'}" align="start" style="right: 0;">ville requise</md-hint>
				<md-hint *ngIf="!city.untouched && !city.valid && city.errors.minlength" [ngStyle]="{'color': 'red'}" align="start" style="right: 0;">2 caractères minimum</md-hint>
			</md-input-container>
			<md-input-container>
				<input mdInput type="text" [mdDatepicker]="myDatepicker" class="big-form" placeholder="Date de l'étape" formControlName="date" [(ngModel)]="newStep.date" required flex/>
				<button mdSuffix [mdDatepickerToggle]="myDatepicker"></button>
				<md-hint *ngIf="!date.untouched && !date.valid && date.errors.required" [ngStyle]="{'color': 'red'}" align="start" style="right: 0;">date requise</md-hint>
			</md-input-container>
			<md-datepicker #myDatepicker></md-datepicker>
			<button md-mini-fab type="button" (click)="getCurrentPosition()" style="margin-right: 0;float:right;">
				<md-icon class="">location_searching</md-icon>
			</button>
		</div>
		<md-input-container style="width:100% !important;">
			<textarea mdInput class="big-form" placeholder="Description de l'étape" formControlName="description" [(ngModel)]="newStep.description" required flex></textarea>
			<md-hint *ngIf="!description.untouched && !description.valid && description.errors.required" [ngStyle]="{'color': 'red'}" align="start" style="right: 0;">description requise</md-hint>
			<md-hint *ngIf="!description.untouched && !description.valid && description.errors.minlength" [ngStyle]="{'color': 'red'}" align="start" style="right: 0;">3 caractères minimum</md-hint>
		</md-input-container>
		<br/>
		<br/>
		<md-select placeholder="Type de transport" formControlName="type" [(ngModel)]="newStep.type" required flex>
			<md-option value="DRIVING">Terrestre (Voiture/Bus/Train...etc.)</md-option>
			<md-option value="WALKING">Pedestre (à pied)</md-option>
			<md-option value="FLIGHT">Autre (Avion/Bateau...etc.)</md-option>
		</md-select>
		<br/>
		<br/>
		<app-upload-file [stepId]="newStep.id" [images]="images"></app-upload-file>
		<br/>
		<md-spinner *ngIf="isLoading"></md-spinner>
		<br/>
		<button md-raised-button style="margin: 2.5%;">VALIDER</button>
	</form>
</div>

